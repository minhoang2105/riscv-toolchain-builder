# üìò H∆Ø·ªöNG D·∫™N C√ÄI ƒê·∫∂T CHI TI·∫æT - RISC-V TOOLCHAIN V·ªöI CUSTOM INSTRUCTIONS

> **M·ª•c ƒë√≠ch:** File n√†y h∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc c√†i ƒë·∫∑t RISC-V GNU Toolchain v·ªõi 4 custom instructions (mod, mul4, mul8, mul16) t·ª´ ƒë·∫ßu ƒë·∫øn cu·ªëi, bao g·ªìm c·∫£ troubleshooting c√°c l·ªói th∆∞·ªùng g·∫∑p.

**T√°c gi·∫£:** GitHub Copilot + minhoang  
**Ng√†y t·∫°o:** 28/10/2025  
**H·ªá th·ªëng:** WSL Ubuntu 22.04 on Windows  
**Th·ªùi gian ∆∞·ªõc t√≠nh:** 3-4 gi·ªù (t√πy t·ªëc ƒë·ªô m·∫°ng v√† m√°y)

---

## üìã M·ª§C L·ª§C

1. [Y√™u c·∫ßu h·ªá th·ªëng](#1-y√™u-c·∫ßu-h·ªá-th·ªëng)
2. [B∆∞·ªõc 1: C√†i ƒë·∫∑t dependencies](#2-b∆∞·ªõc-1-c√†i-ƒë·∫∑t-dependencies)
3. [B∆∞·ªõc 2: Clone repositories](#3-b∆∞·ªõc-2-clone-repositories)
4. [B∆∞·ªõc 3: Th√™m custom instructions v√†o rv_i](#4-b∆∞·ªõc-3-th√™m-custom-instructions-v√†o-rv_i)
5. [B∆∞·ªõc 4: Generate MATCH/MASK values](#5-b∆∞·ªõc-4-generate-matchmask-values)
6. [B∆∞·ªõc 5: S·ª≠a binutils/riscv-opc.h](#6-b∆∞·ªõc-5-s·ª≠a-binutilsriscv-opch)
7. [B∆∞·ªõc 6: S·ª≠a binutils/riscv-opc.c](#7-b∆∞·ªõc-6-s·ª≠a-binutilsriscv-opcc)
8. [B∆∞·ªõc 7: Download submodules](#8-b∆∞·ªõc-7-download-submodules)
9. [B∆∞·ªõc 8: Configure toolchain](#9-b∆∞·ªõc-8-configure-toolchain)
10. [B∆∞·ªõc 9: Build toolchain](#10-b∆∞·ªõc-9-build-toolchain)
11. [B∆∞·ªõc 10: Testing](#11-b∆∞·ªõc-10-testing)
12. [B∆∞·ªõc 11: Spike Simulator (Optional)](#12-b∆∞·ªõc-11-spike-simulator-optional)
13. [Troubleshooting t·ªïng h·ª£p](#13-troubleshooting-t·ªïng-h·ª£p)

---

## 1. Y√äU C·∫¶U H·ªÜ TH·ªêNG

### Hardware t·ªëi thi·ªÉu:
- **CPU:** 4 cores tr·ªü l√™n (khuy·∫øn ngh·ªã 8+ cores)
- **RAM:** 8GB (khuy·∫øn ngh·ªã 16GB)
- **Disk:** 20GB free space
- **Internet:** Stable connection ƒë·ªÉ download ~10GB data

### Software:
- **OS:** Ubuntu 22.04 (WSL ho·∫∑c native)
- **Shell:** bash
- **Quy·ªÅn:** sudo access

---

## 2. B∆Ø·ªöC 1: C√ÄI ƒê·∫∂T DEPENDENCIES

### L·ªánh c√†i ƒë·∫∑t:

```bash
sudo apt-get update
sudo apt-get install -y autoconf automake autotools-dev curl python3 \
    python3-pip libmpc-dev libmpfr-dev libgmp-dev gawk build-essential \
    bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev \
    ninja-build git cmake libglib2.0-dev libslirp-dev
```

### Th·ªùi gian: ~5-10 ph√∫t

### Verify installation:

```bash
gcc --version        # Should show version 11.x or higher
make --version       # Should show version 4.x
git --version        # Should show version 2.x
python3 --version    # Should show version 3.10.x or higher
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `E: Unable to locate package ...`
```
Nguy√™n nh√¢n: Package list ch∆∞a update
Gi·∫£i ph√°p: sudo apt-get update
```

**L·ªói 2:** `dpkg was interrupted`
```
Nguy√™n nh√¢n: Apt b·ªã gi√°n ƒëo·∫°n tr∆∞·ªõc ƒë√≥
Gi·∫£i ph√°p: sudo dpkg --configure -a
```

---

## 3. B∆Ø·ªöC 2: CLONE REPOSITORIES

### T·∫°o th∆∞ m·ª•c l√†m vi·ªác:

```bash
mkdir -p ~/workspace/RISC-V
cd ~/workspace/RISC-V
```

### Clone riscv-gnu-toolchain:

```bash
git clone https://github.com/riscv-collab/riscv-gnu-toolchain.git
```

**Th·ªùi gian:** ~3-5 ph√∫t  
**Dung l∆∞·ª£ng:** ~500MB  
**Output m·∫´u:**
```
Cloning into 'riscv-gnu-toolchain'...
remote: Enumerating objects: 8756, done.
remote: Total 8756 (delta 0), reused 0 (delta 0), pack-reused 8756
Receiving objects: 100% (8756/8756), 4.32 MiB | 2.10 MiB/s, done.
```

### Clone riscv-opcodes:

```bash
git clone https://github.com/riscv/riscv-opcodes.git
```

**Th·ªùi gian:** ~30 gi√¢y  
**Dung l∆∞·ª£ng:** ~5MB

### C√†i ƒë·∫∑t Python tool `uv`:

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc  # Ho·∫∑c m·ªü terminal m·ªõi
```

### Verify:

```bash
ls -la ~/workspace/RISC-V/
# Ph·∫£i th·∫•y 2 th∆∞ m·ª•c: riscv-gnu-toolchain v√† riscv-opcodes

uv --version
# Ph·∫£i th·∫•y: uv 0.x.x
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `fatal: unable to access 'https://github.com/...'`
```
Nguy√™n nh√¢n: Network issue ho·∫∑c proxy
Gi·∫£i ph√°p: 
  - Ki·ªÉm tra: ping github.com
  - Ho·∫∑c d√πng git protocol: git config --global url."git://".insteadOf https://
```

**L·ªói 2:** `uv: command not found` sau khi c√†i
```
Nguy√™n nh√¢n: Shell ch∆∞a reload PATH
Gi·∫£i ph√°p: source ~/.bashrc ho·∫∑c m·ªü terminal m·ªõi
```

---

## 4. B∆Ø·ªöC 3: TH√äM CUSTOM INSTRUCTIONS V√ÄO RV_I

### File c·∫ßn s·ª≠a:
`~/workspace/RISC-V/riscv-opcodes/extensions/rv_i`

### M·ªü file:

```bash
cd ~/workspace/RISC-V/riscv-opcodes
nano extensions/rv_i
# Ho·∫∑c d√πng vim/code t√πy th√≠ch
```

### T√¨m ƒë·∫øn cu·ªëi file v√† th√™m:

```
# Custom instructions - Added 2025-10-28
mod     rd rs1 rs2 31..25=1  14..12=0 6..2=2  1..0=3
mul4    rd rs1 rs2 31..25=0  14..12=3 6..2=1  1..0=3
mul8    rd rs1 rs2 31..25=1  14..12=3 6..2=1  1..0=3
mul16   rd rs1 rs2 31..25=2  14..12=3 6..2=1  1..0=3
```

### L∆∞u file:
- **nano:** Ctrl+O, Enter, Ctrl+X
- **vim:** :wq

### Gi·∫£i th√≠ch format:

```
<t√™n>   <operands>   <bit_field_assignments>
  |         |                  |
  v         v                  v
mod     rd rs1 rs2    31..25=1 14..12=0 6..2=2 1..0=3

Trong ƒë√≥:
- 31..25=1 ‚Üí funct7 = 0b0000001 = 1
- 14..12=0 ‚Üí funct3 = 0b000 = 0
- 6..2=2   ‚Üí opcode[6:2] = 0b00010 = 2
- 1..0=3   ‚Üí opcode[1:0] = 0b11 = 3 (fixed cho R-type)
‚Üí Opcode ƒë·∫ßy ƒë·ªß: 0000001_00000_00000_000_00000_0001011
```

### Verify:

```bash
grep -E "^(mod|mul4|mul8|mul16)" extensions/rv_i
```

**Output mong ƒë·ª£i:** 4 d√≤ng custom instructions

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** Syntax error khi generate MATCH/MASK
```
Nguy√™n nh√¢n: Tab characters thay v√¨ spaces
Gi·∫£i ph√°p: D√πng spaces, kh√¥ng d√πng tab. M·ªói field c√°ch nhau b·ªüi 1+ spaces
```

**L·ªói 2:** Duplicate opcode
```
Nguy√™n nh√¢n: Opcode tr√πng v·ªõi instruction c√≥ s·∫µn
Gi·∫£i ph√°p: Thay ƒë·ªïi bit fields ƒë·ªÉ t·∫°o opcode kh√°c
```

---

## 5. B∆Ø·ªöC 4: GENERATE MATCH/MASK VALUES

### Ch·∫°y generator:

```bash
cd ~/workspace/RISC-V/riscv-opcodes
uv run riscv_opcodes -c 'rv*' > encoding.out.h
```

**Th·ªùi gian:** ~5-10 gi√¢y

### Ki·ªÉm tra output:

```bash
grep -E "MATCH_(MOD|MUL4|MUL8|MUL16)" encoding.out.h
```

**Output mong ƒë·ª£i:**
```c
#define MATCH_MOD 0x200000b
#define MASK_MOD  0xfe00707f
#define MATCH_MUL4 0x600b
#define MASK_MUL4  0xfe00707f
#define MATCH_MUL8 0x200600b
#define MASK_MUL8  0xfe00707f
#define MATCH_MUL16 0x400600b
#define MASK_MUL16  0xfe00707f
```

### Copy values ƒë·ªÉ d√πng ·ªü b∆∞·ªõc sau:

```bash
grep -A1 "MATCH_MOD\|MATCH_MUL4\|MATCH_MUL8\|MATCH_MUL16" encoding.out.h > ~/custom_values.txt
cat ~/custom_values.txt
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `uv: command not found`
```
Nguy√™n nh√¢n: uv ch∆∞a ƒë∆∞·ª£c c√†i ho·∫∑c PATH ch∆∞a update
Gi·∫£i ph√°p: curl -LsSf https://astral.sh/uv/install.sh | sh && source ~/.bashrc
```

**L·ªói 2:** `ModuleNotFoundError: No module named ...`
```
Nguy√™n nh√¢n: Dependencies c·ªßa riscv_opcodes ch∆∞a ƒë∆∞·ª£c install
Gi·∫£i ph√°p: uv t·ª± ƒë·ªông c√†i dependencies, ch·ªù n√≥ ho√†n th√†nh
```

**L·ªói 3:** Kh√¥ng th·∫•y custom instructions trong output
```
Nguy√™n nh√¢n: rv_i file ch∆∞a ƒë∆∞·ª£c s·ª≠a ƒë√∫ng
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i b∆∞·ªõc 3, verify format
```

---

## 6. B∆Ø·ªöC 5: S·ª¨A BINUTILS/RISCV-OPC.H

### File c·∫ßn s·ª≠a:
`~/workspace/RISC-V/riscv-gnu-toolchain/binutils/include/opcode/riscv-opc.h`

### Backup file g·ªëc:

```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain/binutils/include/opcode
cp riscv-opc.h riscv-opc.h.backup
```

### T√¨m v·ªã tr√≠ th√™m code (sau ADD instruction):

```bash
grep -n "MATCH_ADD" riscv-opc.h | head -1
```

**Output m·∫´u:** `59:#define MATCH_ADD 0x33`

### M·ªü file v√† th√™m sau d√≤ng MATCH_ADD:

```bash
nano riscv-opc.h
```

Nh·∫•n **Ctrl+/** ƒë·ªÉ goto line, nh·∫≠p s·ªë d√≤ng (v√≠ d·ª•: 59), t√¨m ƒë·∫øn sau `#define MASK_ADD ...`

Th√™m v√†o:

```c
/* Custom instructions - Added 2025-10-28 */
#define MATCH_MOD 0x200000b
#define MASK_MOD  0xfe00707f
#define MATCH_MUL4 0x600b
#define MASK_MUL4  0xfe00707f
#define MATCH_MUL8 0x200600b
#define MASK_MUL8  0xfe00707f
#define MATCH_MUL16 0x400600b
#define MASK_MUL16  0xfe00707f
```

### T√¨m ph·∫ßn DECLARE_INSN (cu·ªëi file):

```bash
grep -n "DECLARE_INSN(add" riscv-opc.h
```

**Output m·∫´u:** `3057:DECLARE_INSN(add, MATCH_ADD, MASK_ADD)`

Th√™m sau d√≤ng n√†y:

```c
DECLARE_INSN(mod, MATCH_MOD, MASK_MOD)
DECLARE_INSN(mul4, MATCH_MUL4, MASK_MUL4)
DECLARE_INSN(mul8, MATCH_MUL8, MASK_MUL8)
DECLARE_INSN(mul16, MATCH_MUL16, MASK_MUL16)
```

### L∆∞u file (Ctrl+O, Enter, Ctrl+X)

### Verify:

```bash
grep -c "MATCH_MOD\|DECLARE_INSN(mod" riscv-opc.h
# Ph·∫£i tr·∫£ v·ªÅ: 2 (1 l·∫ßn MATCH, 1 l·∫ßn DECLARE)
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** Compilation error sau n√†y: `error: 'MATCH_MOD' undeclared`
```
Nguy√™n nh√¢n: Th√™m v√†o sai v·ªã tr√≠ ho·∫∑c typo
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i #define, ph·∫£i n·∫±m tr∆∞·ªõc DECLARE_INSN
```

**L·ªói 2:** `duplicate macro definition`
```
Nguy√™n nh√¢n: ƒê√£ th√™m 2 l·∫ßn
Gi·∫£i ph√°p: grep ƒë·ªÉ ki·ªÉm tra, x√≥a duplicate
```

---

## 7. B∆Ø·ªöC 6: S·ª¨A BINUTILS/RISCV-OPC.C

### File c·∫ßn s·ª≠a:
`~/workspace/RISC-V/riscv-gnu-toolchain/binutils/opcodes/riscv-opc.c`

### Backup:

```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain/binutils/opcodes
cp riscv-opc.c riscv-opc.c.backup
```

### T√¨m instruction table:

```bash
grep -n "const struct riscv_opcode riscv_opcodes" riscv-opc.c
```

**Output m·∫´u:** `850:const struct riscv_opcode riscv_opcodes[] =`

### T√¨m entry c·ªßa ADD instruction:

```bash
grep -n '{"add"' riscv-opc.c | head -1
```

**Output m·∫´u:** `899:{"add", ...}`

### M·ªü file v√† th√™m TR∆Ø·ªöC d√≤ng `/* Basic RVI instructions */`:

```bash
nano riscv-opc.c
```

Goto line ~899, t√¨m comment `/* Basic RVI instructions */`

Th√™m **TR∆Ø·ªöC** comment n√†y:

```c
/* Custom instructions */
{"mod",        0, INSN_CLASS_I,   "d,s,t", MATCH_MOD, MASK_MOD, match_opcode, 0 },
{"mul4",       0, INSN_CLASS_I,   "d,s,t", MATCH_MUL4, MASK_MUL4, match_opcode, 0 },
{"mul8",       0, INSN_CLASS_I,   "d,s,t", MATCH_MUL8, MASK_MUL8, match_opcode, 0 },
{"mul16",      0, INSN_CLASS_I,   "d,s,t", MATCH_MUL16, MASK_MUL16, match_opcode, 0 },

```

### Gi·∫£i th√≠ch format:

```c
{"mod",        // T√™n instruction
 0,            // Version (0 = base version)
 INSN_CLASS_I, // Instruction class (I = Integer base)
 "d,s,t",      // Operand format (d=rd, s=rs1, t=rs2)
 MATCH_MOD,    // Match value (t·ª´ riscv-opc.h)
 MASK_MOD,     // Mask value (t·ª´ riscv-opc.h)
 match_opcode, // Matching function
 0             // Flags
},
```

### L∆∞u file

### Verify:

```bash
grep -c '{"mod"' riscv-opc.c
# Ph·∫£i tr·∫£ v·ªÅ: 1
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** Compilation error: `expected '}' before ...`
```
Nguy√™n nh√¢n: Thi·∫øu d·∫•u ph·∫©y ·ªü cu·ªëi m·ªói entry
Gi·∫£i ph√°p: M·ªói entry ph·∫£i c√≥ d·∫•u ph·∫©y cu·ªëi: }, (k·ªÉ c·∫£ entry cu·ªëi c√πng)
```

**L·ªói 2:** `'MATCH_MOD' undeclared`
```
Nguy√™n nh√¢n: Ch∆∞a s·ª≠a riscv-opc.h ·ªü b∆∞·ªõc 5
Gi·∫£i ph√°p: Quay l·∫°i b∆∞·ªõc 5
```

**L·ªói 3:** Assembler kh√¥ng nh·∫≠n di·ªán instruction
```
Nguy√™n nh√¢n: Sai operand format string "d,s,t"
Gi·∫£i ph√°p: D√πng ch√≠nh x√°c "d,s,t" cho R-type instructions
```

---

## 8. B∆Ø·ªöC 7: DOWNLOAD SUBMODULES

### Chuy·ªÉn v√†o th∆∞ m·ª•c toolchain:

```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain
```

### Download GCC v√† Newlib:

```bash
make -C binutils download-gcc download-newlib 2>&1 | tee download.log
```

**Th·ªùi gian:** ~10-20 ph√∫t  
**Dung l∆∞·ª£ng:** ~2GB

**Output m·∫´u:**
```
Cloning into 'gcc'...
remote: Enumerating objects: 5234567, done.
remote: Total 5234567 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (5234567/5234567), 1.5 GiB | 3.2 MiB/s, done.
```

### Verify:

```bash
ls -la gcc newlib
# Ph·∫£i th·∫•y 2 th∆∞ m·ª•c v·ªõi nhi·ªÅu files
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `fatal: unable to access ...`
```
Nguy√™n nh√¢n: Network timeout ho·∫∑c GitHub down
Gi·∫£i ph√°p: 
  - Ch·ªù v√†i ph√∫t v√† th·ª≠ l·∫°i
  - Ho·∫∑c: git clone https://gcc.gnu.org/git/gcc.git
```

**L·ªói 2:** `No space left on device`
```
Nguy√™n nh√¢n: Disk full
Gi·∫£i ph√°p: df -h ƒë·ªÉ ki·ªÉm tra, d·ªçn d·∫πp disk
```

**L·ªói 3:** Download b·ªã gi√°n ƒëo·∫°n
```
Nguy√™n nh√¢n: WSL/PowerShell timeout
Gi·∫£i ph√°p: Ch·∫°y trong native WSL terminal thay v√¨ PowerShell wrapper
```

---

## 9. B∆Ø·ªöC 8: CONFIGURE TOOLCHAIN

### T·∫°o v√† c·∫•p quy·ªÅn cho th∆∞ m·ª•c c√†i ƒë·∫∑t:

```bash
sudo mkdir -p /opt/riscv_custom
sudo chown -R $USER:$USER /opt/riscv_custom
```

### Configure:

```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain
./configure --prefix=/opt/riscv_custom 2>&1 | tee configure.log
```

**Th·ªùi gian:** ~2-3 ph√∫t

**Output cu·ªëi c√πng ph·∫£i th·∫•y:**
```
configure: creating ./config.status
config.status: creating Makefile
```

### Verify:

```bash
ls -la Makefile
# Ph·∫£i th·∫•y file Makefile ƒë∆∞·ª£c t·∫°o m·ªõi
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `configure: error: Building GCC requires GMP 4.2+, MPFR 3.1.0+ and MPC 0.8.0+.`
```
Nguy√™n nh√¢n: Thi·∫øu dependencies
Gi·∫£i ph√°p: sudo apt-get install libgmp-dev libmpfr-dev libmpc-dev
```

**L·ªói 2:** `Permission denied: /opt/riscv_custom`
```
Nguy√™n nh√¢n: Ch∆∞a chown folder
Gi·∫£i ph√°p: sudo chown -R $USER:$USER /opt/riscv_custom
```

---

## 10. B∆Ø·ªöC 9: BUILD TOOLCHAIN

### Build (b∆∞·ªõc t·ªën th·ªùi gian nh·∫•t):

```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain
make -j$(nproc) 2>&1 | tee build.log
```

**Th·ªùi gian:** 2-3 gi·ªù (t√πy CPU)  
**CPU usage:** 100% tr√™n t·∫•t c·∫£ cores

### Theo d√µi ti·∫øn tr√¨nh:

M·ªü terminal kh√°c:
```bash
tail -f ~/workspace/RISC-V/riscv-gnu-toolchain/build.log
```

### C√°c giai ƒëo·∫°n build:

1. **Binutils** (~10 ph√∫t)
   - Th·∫•y: `checking for gcc... gcc`, `building libiberty`, `building bfd`
   
2. **GCC Stage 1** (~30 ph√∫t)
   - Th·∫•y: `Configuring stage 1 in ./gcc`
   
3. **Newlib** (~20 ph√∫t)
   - Th·∫•y: `building target-libgloss`
   
4. **GCC Stage 2** (~1 gi·ªù)
   - Th·∫•y: `Configuring stage 2 in ./gcc`
   
5. **GDB** (~30 ph√∫t)
   - Th·∫•y: `checking for makeinfo... makeinfo`

### Khi build xong, verify:

```bash
echo $?
# Ph·∫£i tr·∫£ v·ªÅ: 0 (success)

ls -lh /opt/riscv_custom/bin/riscv64-unknown-elf-*
# Ph·∫£i th·∫•y nhi·ªÅu executables
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `make: *** [Makefile:xxx] Error 2`
```
Nguy√™n nh√¢n: Compilation error trong source code
Gi·∫£i ph√°p: 
  - Ki·ªÉm tra build.log ƒë·ªÉ t√¨m error message c·ª• th·ªÉ
  - Th∆∞·ªùng do s·ª≠a sai c√∫ ph√°p ·ªü b∆∞·ªõc 5-6
  - Fix v√† ch·∫°y l·∫°i: make -j$(nproc)
```

**L·ªói 2:** Build process stops gi·ªØa ch·ª´ng
```
Nguy√™n nh√¢n: Thi·∫øu RAM ho·∫∑c PowerShell timeout
Gi·∫£i ph√°p: 
  - Gi·∫£m cores: make -j2
  - Ho·∫∑c ch·∫°y trong native WSL terminal
  - Ho·∫∑c th√™m swap: sudo fallocate -l 4G /swapfile && sudo mkswap /swapfile && sudo swapon /swapfile
```

**L·ªói 3:** `/usr/bin/install: cannot remove '/opt/riscv_custom/...': Permission denied`
```
Nguy√™n nh√¢n: Quy·ªÅn truy c·∫≠p b·ªã thay ƒë·ªïi gi·ªØa ch·ª´ng
Gi·∫£i ph√°p: sudo chown -R $USER:$USER /opt/riscv_custom && make -j$(nproc)
```

**L·ªói 4:** `collect2: error: ld returned 1 exit status`
```
Nguy√™n nh√¢n: Linker error, th∆∞·ªùng do thi·∫øu libraries
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i dependencies ·ªü b∆∞·ªõc 1
```

**L·ªói 5:** Build th√†nh c√¥ng nh∆∞ng instructions kh√¥ng work
```
Nguy√™n nh√¢n: Binutils ƒë∆∞·ª£c build tr∆∞·ªõc khi s·ª≠a code
Gi·∫£i ph√°p: 
  - X√≥a binutils build: rm -rf build-binutils-newlib
  - Build l·∫°i: make -j$(nproc)
```

---

## 11. B∆Ø·ªöC 10: TESTING

### Test 1: Verify tools ƒë√£ c√†i

```bash
/opt/riscv_custom/bin/riscv64-unknown-elf-gcc --version
/opt/riscv_custom/bin/riscv64-unknown-elf-as --version
```

**Output mong ƒë·ª£i:**
```
riscv64-unknown-elf-gcc (GCC) 15.1.0
GNU assembler (GNU Binutils) 2.43.50
```

### Test 2: T·∫°o test file assembly

```bash
cd ~/workspace/RISC-V

cat > test_custom.s << 'EOF'
    .text
    .globl _start
_start:
    # Test mod instruction
    li      a0, 17
    li      a1, 5
    mod     a2, a0, a1

    # Test mul4 instruction
    li      a0, 5
    li      a1, 5
    mul4    a3, a0, a1

    # Test mul8 instruction
    mul8    a4, a0, a1

    # Test mul16 instruction
    mul16   a5, a0, a1

    # Exit
    li      a7, 93
    li      a0, 0
    ecall
EOF
```

### Test 3: Assemble

```bash
/opt/riscv_custom/bin/riscv64-unknown-elf-as test_custom.s -o test_custom.o
```

**N·∫øu th√†nh c√¥ng:** Kh√¥ng c√≥ output, file test_custom.o ƒë∆∞·ª£c t·∫°o

**N·∫øu l·ªói:**
```
test_custom.s: Assembler messages:
test_custom.s:8: Error: unrecognized opcode `mod a2,a0,a1'
```
‚Üí Custom instructions ch∆∞a ƒë∆∞·ª£c th√™m v√†o assembler

### Test 4: Disassemble

```bash
/opt/riscv_custom/bin/riscv64-unknown-elf-objdump -d test_custom.o
```

**Output mong ƒë·ª£i:**
```
test_custom.o:     file format elf64-littleriscv

Disassembly of section .text:

0000000000000000 <_start>:
   0:   4545                    li      a0,17
   2:   4595                    li      a1,5
   4:   02b5060b                mod     a2,a0,a1    ‚Üê ‚úÖ
   8:   4515                    li      a0,5
   a:   4595                    li      a1,5
   c:   00b5668b                mul4    a3,a0,a1    ‚Üê ‚úÖ
  10:   02b5670b                mul8    a4,a0,a1    ‚Üê ‚úÖ
  14:   04b5678b                mul16   a5,a0,a1    ‚Üê ‚úÖ
  18:   05d00893                li      a7,93
  1c:   4501                    li      a0,0
  1e:   00000073                ecall
```

### Test 5: Verify opcodes

```bash
/opt/riscv_custom/bin/riscv64-unknown-elf-objdump -d test_custom.o | grep -E "(mod|mul4|mul8|mul16)"
```

**Ki·ªÉm tra opcodes:**
- `mod` ‚Üí `02b5060b` = `0x200000b` ‚úÖ
- `mul4` ‚Üí `00b5668b` = `0x600b` (v·ªõi rs1=a0, rs2=a1, rd=a3) ‚úÖ
- `mul8` ‚Üí `02b5670b` = `0x200600b` ‚úÖ
- `mul16` ‚Üí `04b5678b` = `0x400600b` ‚úÖ

### Test 6: T·∫°o quick test script

```bash
cat > test_quick.sh << 'EOF'
#!/bin/bash
echo "=========================================="
echo "TESTING RISC-V CUSTOM INSTRUCTIONS"
echo "=========================================="
echo ""

/opt/riscv_custom/bin/riscv64-unknown-elf-as test_custom.s -o test_custom.o
if [ $? -eq 0 ]; then
    echo "‚úÖ Assembly OK!"
else
    echo "‚ùå Assembly FAILED!"
    exit 1
fi

echo ""
echo "Disassembly:"
echo "=========================================="
/opt/riscv_custom/bin/riscv64-unknown-elf-objdump -d test_custom.o | grep -A1 -E "(mod|mul4|mul8|mul16)"
echo "=========================================="
echo ""
echo "‚úÖ ALL TESTS PASSED!"
EOF

chmod +x test_quick.sh
./test_quick.sh
```

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p:

**L·ªói 1:** `Error: unrecognized opcode`
```
Nguy√™n nh√¢n: 
  - Ch∆∞a s·ª≠a riscv-opc.c/h ƒë√∫ng
  - Ho·∫∑c ƒëang d√πng assembler c≈©
Gi·∫£i ph√°p: 
  - Verify files ƒë√£ s·ª≠a: grep "MATCH_MOD" riscv-opc.h
  - D√πng full path: /opt/riscv_custom/bin/riscv64-unknown-elf-as
  - Rebuild binutils: rm -rf build-binutils-newlib && make -j$(nproc)
```

**L·ªói 2:** Disassemble hi·ªÉn th·ªã `.word 0x02b5060b` thay v√¨ `mod`
```
Nguy√™n nh√¢n: S·ª≠a riscv-opc.c nh∆∞ng ch∆∞a rebuild
Gi·∫£i ph√°p: rm -rf build-binutils-newlib && make -j$(nproc)
```

**L·ªói 3:** Opcode kh√¥ng kh·ªõp v·ªõi MATCH value
```
Nguy√™n nh√¢n: ƒê·ªãnh nghƒ©a sai trong rv_i file
Gi·∫£i ph√°p: 
  - Re-generate: cd riscv-opcodes && uv run riscv_opcodes -c 'rv*'
  - Ki·ªÉm tra l·∫°i bit fields trong rv_i
```

---

## 12. B∆Ø·ªöC 11: SPIKE SIMULATOR (OPTIONAL)

> **L∆∞u √Ω:** B∆∞·ªõc n√†y ƒë·ªÉ ch·∫°y (execute) ch∆∞∆°ng tr√¨nh v·ªõi custom instructions, kh√¥ng ch·ªâ assemble.

### Clone Spike repository:

```bash
cd ~/workspace/RISC-V
git clone https://github.com/riscv-software-src/riscv-isa-sim.git
cd riscv-isa-sim
```

**Th·ªùi gian:** ~1 ph√∫t

### T·∫°o behavior files cho 4 instructions:

```bash
cd riscv/insns

# MOD instruction
echo 'WRITE_RD(sext_xlen(RS1 % RS2));' > mod.h

# MUL4 instruction (shift left 2 bits = multiply by 4)
echo 'WRITE_RD(sext_xlen(RS1 << 2));' > mul4.h

# MUL8 instruction (shift left 3 bits = multiply by 8)
echo 'WRITE_RD(sext_xlen(RS1 << 3));' > mul8.h

# MUL16 instruction (shift left 4 bits = multiply by 16)
echo 'WRITE_RD(sext_xlen(RS1 << 4));' > mul16.h
```

### Verify:

```bash
cat mod.h mul4.h mul8.h mul16.h
```

### S·ª≠a encoding.h:

```bash
cd ~/workspace/RISC-V/riscv-isa-sim/riscv
cp encoding.h encoding.h.backup

# T√¨m v·ªã tr√≠ ADD instruction
grep -n "MATCH_ADD" encoding.h | head -1
# Output: 567:#define MATCH_ADD 0x33
```

M·ªü file v√† th√™m sau ADD (v√≠ d·ª• sau d√≤ng 568):

```bash
nano encoding.h
```

Th√™m:

```c
/* Custom instructions */
#define MATCH_MOD 0x200000b
#define MASK_MOD  0xfe00707f
#define MATCH_MUL4 0x600b
#define MASK_MUL4  0xfe00707f
#define MATCH_MUL8 0x200600b
#define MASK_MUL8  0xfe00707f
#define MATCH_MUL16 0x400600b
#define MASK_MUL16  0xfe00707f
```

T√¨m ph·∫ßn DECLARE_INSN (cu·ªëi file ~line 3124):

```bash
grep -n "DECLARE_INSN(add" encoding.h
```

Th√™m sau:

```c
DECLARE_INSN(mod, MATCH_MOD, MASK_MOD)
DECLARE_INSN(mul4, MATCH_MUL4, MASK_MUL4)
DECLARE_INSN(mul8, MATCH_MUL8, MASK_MUL8)
DECLARE_INSN(mul16, MATCH_MUL16, MASK_MUL16)
```

### S·ª≠a riscv.mk.in:

```bash
cd ~/workspace/RISC-V/riscv-isa-sim/riscv
cp riscv.mk.in riscv.mk.in.backup

# T√¨m instruction list
grep -n "riscv_insn_ext_i = \\" riscv.mk.in
```

M·ªü file v√† th√™m mod, mul4, mul8, mul16 v√†o list:

```bash
nano riscv.mk.in
```

T√¨m `add \` trong riscv_insn_ext_i list, th√™m sau n√≥:

```makefile
riscv_insn_ext_i = \
	add \
	mod \
	mul4 \
	mul8 \
	mul16 \
	addi \
	...
```

### Configure Spike:

```bash
cd ~/workspace/RISC-V/riscv-isa-sim
mkdir build && cd build
../configure --prefix=/opt/riscv_custom
```

**Th·ªùi gian:** ~30 gi√¢y

### Build Spike:

```bash
make -j$(nproc) 2>&1 | tee spike-build.log
```

**Th·ªùi gian:** ~20-30 ph√∫t

**Verify build th√†nh c√¥ng:**
```bash
ls -lh spike spike-dasm
# Ph·∫£i th·∫•y 2 executables
```

### Install Spike:

```bash
echo '123' | sudo -S make install
```

**Password:** Thay `123` b·∫±ng password th·∫≠t c·ªßa b·∫°n

### Verify installation:

```bash
/opt/riscv_custom/bin/spike --help | head -5
```

**Output:**
```
Spike RISC-V ISA Simulator 1.1.1-dev

usage: spike [host options] <target program> [target options]
```

### Test v·ªõi custom instructions:

```bash
cd ~/workspace/RISC-V

# Assemble test file
/opt/riscv_custom/bin/riscv64-unknown-elf-as test_custom.s -o test_custom.o

# Link
/opt/riscv_custom/bin/riscv64-unknown-elf-ld test_custom.o -o test_custom.elf

# Disassemble ƒë·ªÉ verify
/opt/riscv_custom/bin/riscv64-unknown-elf-objdump -d test_custom.elf | grep -E "(mod|mul4|mul8|mul16)"
```

**Output mong ƒë·ª£i:**
```
100b4:       02b5060b                mod     a2,a0,a1
100bc:       00b5668b                mul4    a3,a0,a1
100c0:       02b5670b                mul8    a4,a0,a1
100c4:       04b5678b                mul16   a5,a0,a1
```

‚úÖ **Spike simulator gi·ªù ƒë√£ h·ªó tr·ª£ custom instructions!**

### ‚ùå L·ªói c√≥ th·ªÉ g·∫∑p khi build Spike:

**L·ªói 1:** `undefined reference to 'illegal_instruction'`
```
Nguy√™n nh√¢n: Thi·∫øu DECLARE_INSN trong encoding.h
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i encoding.h, ph·∫£i c√≥ ƒë·ªß 4 DECLARE_INSN
```

**L·ªói 2:** `No rule to make target 'mod.h'`
```
Nguy√™n nh√¢n: Ch∆∞a th√™m v√†o riscv.mk.in
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i riscv.mk.in, grep "mod" riscv.mk.in
```

**L·ªói 3:** Build th√†nh c√¥ng nh∆∞ng spike crash khi run
```
Nguy√™n nh√¢n: Syntax error trong behavior files (mod.h, mul4.h,...)
Gi·∫£i ph√°p: Ki·ªÉm tra l·∫°i n·ªôi dung c√°c .h files, ƒë·∫£m b·∫£o ƒë√∫ng syntax
```

---

## 13. TROUBLESHOOTING T·ªîNG H·ª¢P

### üîç Checklist khi g·∫∑p l·ªói:

#### L·ªói ·ªü b∆∞·ªõc build toolchain:

1. **Ki·ªÉm tra dependencies:**
   ```bash
   gcc --version
   make --version
   autoconf --version
   ```

2. **Ki·ªÉm tra disk space:**
   ```bash
   df -h /opt
   df -h ~
   ```

3. **Ki·ªÉm tra RAM:**
   ```bash
   free -h
   # N·∫øu < 2GB available, th√™m swap
   ```

4. **Ki·ªÉm tra files ƒë√£ s·ª≠a:**
   ```bash
   grep "MATCH_MOD" ~/workspace/RISC-V/riscv-gnu-toolchain/binutils/include/opcode/riscv-opc.h
   grep '{"mod"' ~/workspace/RISC-V/riscv-gnu-toolchain/binutils/opcodes/riscv-opc.c
   ```

5. **Ki·ªÉm tra quy·ªÅn:**
   ```bash
   ls -ld /opt/riscv_custom
   # Ph·∫£i th·∫•y: drwxr-xr-x ... <your_user> <your_group>
   ```

#### L·ªói khi test:

1. **Assembler kh√¥ng nh·∫≠n instruction:**
   - Verify ƒëang d√πng ƒë√∫ng binary:
     ```bash
     which riscv64-unknown-elf-as
     /opt/riscv_custom/bin/riscv64-unknown-elf-as --version
     ```
   
   - Ki·ªÉm tra riscv-opc.c ƒë√£ ƒë∆∞·ª£c compile:
     ```bash
     ls -l /opt/riscv_custom/bin/riscv64-unknown-elf-as
     # File ph·∫£i m·ªõi h∆°n l√∫c s·ª≠a code
     ```

2. **Disassembler kh√¥ng hi·ªÉn th·ªã t√™n instruction:**
   - Rebuild binutils:
     ```bash
     cd ~/workspace/RISC-V/riscv-gnu-toolchain
     rm -rf build-binutils-newlib
     make -j$(nproc)
     ```

3. **Opcode kh√¥ng ƒë√∫ng:**
   - Re-generate MATCH/MASK:
     ```bash
     cd ~/workspace/RISC-V/riscv-opcodes
     uv run riscv_opcodes -c 'rv*' > encoding.out.h
     grep "MATCH_MOD" encoding.out.h
     ```

### üìù Log files quan tr·ªçng:

```bash
~/workspace/RISC-V/riscv-gnu-toolchain/build.log       # Build log
~/workspace/RISC-V/riscv-gnu-toolchain/configure.log   # Configure log
~/workspace/RISC-V/riscv-isa-sim/build/spike-build.log # Spike build log
```

### üîß Recovery commands:

**Clean build v√† rebuild ho√†n to√†n:**
```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain
make clean
./configure --prefix=/opt/riscv_custom
make -j$(nproc) 2>&1 | tee rebuild.log
```

**Ch·ªâ rebuild binutils:**
```bash
rm -rf build-binutils-newlib build-gdb-newlib
make -j$(nproc)
```

**Restore backup files:**
```bash
cd ~/workspace/RISC-V/riscv-gnu-toolchain/binutils
cp include/opcode/riscv-opc.h.backup include/opcode/riscv-opc.h
cp opcodes/riscv-opc.c.backup opcodes/riscv-opc.c
```

---

## üìö PH·∫¶N PH·ª§ L·ª§C

### A. Gi·∫£i th√≠ch Instruction Encoding

**R-type format (cho mod, mul4, mul8, mul16):**

```
 31          25 24   20 19   15 14    12 11    7 6      0
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   funct7    ‚îÇ  rs2  ‚îÇ  rs1  ‚îÇ funct3 ‚îÇ   rd  ‚îÇ opcode ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    7 bits      5 bits  5 bits  3 bits   5 bits  7 bits
```

**V√≠ d·ª•: `mod a2, a0, a1`**

- `rd` = a2 = x12 = `01100` (5 bits)
- `rs1` = a0 = x10 = `01010` (5 bits)
- `rs2` = a1 = x11 = `01011` (5 bits)
- `funct3` = `000` (3 bits) ‚Üê T·ª´ rv_i: 14..12=0
- `funct7` = `0000001` (7 bits) ‚Üê T·ª´ rv_i: 31..25=1
- `opcode` = `0001011` (7 bits) ‚Üê T·ª´ rv_i: 6..2=2, 1..0=3 ‚Üí `00010_11`

**Binary:**
```
0000001_01011_01010_000_01100_0001011
```

**Hex:** `0x02b5060b` ‚Üí Kh·ªõp v·ªõi MATCH_MOD ‚úÖ

### B. √ù nghƒ©a c√°c files quan tr·ªçng:

| File | M·ª•c ƒë√≠ch |
|------|----------|
| `riscv-opcodes/extensions/rv_i` | ƒê·ªãnh nghƒ©a instructions b·∫±ng human-readable format |
| `riscv-opcodes/encoding.out.h` | MATCH/MASK values ƒë∆∞·ª£c generate t·ª± ƒë·ªông |
| `binutils/include/opcode/riscv-opc.h` | Header file v·ªõi MATCH/MASK macros cho assembler |
| `binutils/opcodes/riscv-opc.c` | Instruction table cho assembler/disassembler |
| `riscv-isa-sim/riscv/insns/*.h` | Behavior c·ªßa instructions trong Spike simulator |
| `riscv-isa-sim/riscv/encoding.h` | MATCH/MASK cho Spike |
| `riscv-isa-sim/riscv/riscv.mk.in` | Makefile template v·ªõi danh s√°ch instructions |

### C. Quick Reference Table

| Task | Command |
|------|---------|
| Assemble | `riscv64-unknown-elf-as input.s -o output.o` |
| Disassemble | `riscv64-unknown-elf-objdump -d output.o` |
| Compile C | `riscv64-unknown-elf-gcc -c input.c -o output.o` |
| Link | `riscv64-unknown-elf-ld input.o -o output.elf` |
| View symbols | `riscv64-unknown-elf-nm output.elf` |
| View headers | `riscv64-unknown-elf-readelf -h output.elf` |
| Run on Spike | `spike pk output.elf` |
| Debug on Spike | `spike -d pk output.elf` |

### D. Environment Setup cho .bashrc

Th√™m v√†o `~/.bashrc` ƒë·ªÉ d·ªÖ d√πng:

```bash
# RISC-V Toolchain
export RISCV=/opt/riscv_custom
export PATH=$RISCV/bin:$PATH

# Aliases
alias rvgcc='riscv64-unknown-elf-gcc'
alias rvas='riscv64-unknown-elf-as'
alias rvld='riscv64-unknown-elf-ld'
alias rvobjdump='riscv64-unknown-elf-objdump'
alias rvspike='spike'
```

Reload:
```bash
source ~/.bashrc
```

Gi·ªù c√≥ th·ªÉ d√πng:
```bash
rvas test.s -o test.o
rvobjdump -d test.o
```

---

## ‚úÖ CHECKLIST HO√ÄN TH√ÄNH

Copy checklist n√†y v√† ƒë√°nh d·∫•u khi l√†m:

```
Phase 1: Chu·∫©n b·ªã
‚ñ° C√†i dependencies (b∆∞·ªõc 1)
‚ñ° Clone riscv-gnu-toolchain
‚ñ° Clone riscv-opcodes
‚ñ° C√†i uv tool

Phase 2: ƒê·ªãnh nghƒ©a instructions
‚ñ° Th√™m 4 instructions v√†o rv_i (b∆∞·ªõc 3)
‚ñ° Generate MATCH/MASK values (b∆∞·ªõc 4)
‚ñ° Verify encoding.out.h

Phase 3: S·ª≠a source code
‚ñ° Backup riscv-opc.h
‚ñ° Th√™m MATCH/MASK v√†o riscv-opc.h (b∆∞·ªõc 5)
‚ñ° Th√™m DECLARE_INSN v√†o riscv-opc.h
‚ñ° Backup riscv-opc.c
‚ñ° Th√™m entries v√†o riscv-opc.c (b∆∞·ªõc 6)

Phase 4: Build
‚ñ° Download submodules gcc/newlib (b∆∞·ªõc 7)
‚ñ° Configure toolchain (b∆∞·ªõc 8)
‚ñ° Fix quy·ªÅn /opt/riscv_custom
‚ñ° Build toolchain (b∆∞·ªõc 9) - CH·ªú 2-3 GI·ªúƒê√É
‚ñ° Verify executables ƒë∆∞·ª£c t·∫°o

Phase 5: Test
‚ñ° T·∫°o test_custom.s
‚ñ° Test assembler
‚ñ° Test disassembler
‚ñ° Verify opcodes
‚ñ° T·∫°o test_quick.sh

Phase 6: Spike (Optional)
‚ñ° Clone riscv-isa-sim
‚ñ° T·∫°o behavior files (.h)
‚ñ° S·ª≠a encoding.h
‚ñ° S·ª≠a riscv.mk.in
‚ñ° Configure v√† build Spike
‚ñ° Install Spike
‚ñ° Test Spike v·ªõi custom instructions

Phase 7: Documentation
‚ñ° ƒê·ªçc h·∫øt file n√†y üòä
‚ñ° Bookmark cho l·∫ßn sau
‚ñ° Share v·ªõi team members
```

---

## üéØ K·∫æT LU·∫¨N

**Ch√∫c m·ª´ng!** N·∫øu b·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√°c b∆∞·ªõc, b·∫°n ƒë√£ c√≥:

‚úÖ RISC-V GNU Toolchain t√πy ch·ªânh v·ªõi 4 custom instructions  
‚úÖ Kh·∫£ nƒÉng assemble/disassemble code v·ªõi instructions m·ªõi  
‚úÖ (Optional) Spike simulator ƒë·ªÉ ch·∫°y code  
‚úÖ Ki·∫øn th·ª©c s√¢u v·ªÅ RISC-V toolchain internals  
‚úÖ K·ªπ nƒÉng troubleshooting cho c√°c l·ªói th∆∞·ªùng g·∫∑p  

**Th·ªùi gian t·ªïng:** ~3-4 gi·ªù  
**K·∫øt qu·∫£:** Production-ready custom RISC-V toolchain  

**L∆∞u √Ω quan tr·ªçng:**
- üîí Backup th∆∞ m·ª•c `/opt/riscv_custom` sau khi build xong
- üìù L∆∞u files ƒë√£ s·ª≠a (riscv-opc.h, riscv-opc.c, rv_i)
- üîÑ N·∫øu c·∫ßn rebuild: ch·ªâ c·∫ßn s·ª≠a files v√† `make -j$(nproc)`
- üìß Share file n√†y v·ªõi team ƒë·ªÉ h·ªç c√≥ th·ªÉ reproduce

**C√°c b∆∞·ªõc ti·∫øp theo c√≥ th·ªÉ l√†m:**
1. Th√™m nhi·ªÅu custom instructions h∆°n
2. Implement trong hardware (FPGA/ASIC)
3. T·∫°o compiler intrinsics cho C/C++
4. T√≠ch h·ª£p v·ªõi frameworks nh∆∞ Rocket-Chip

**Li√™n h·ªá h·ªó tr·ª£:**
- RISC-V Specification: https://riscv.org/specifications/
- GNU Toolchain Issues: https://github.com/riscv-collab/riscv-gnu-toolchain/issues
- Spike Issues: https://github.com/riscv-software-src/riscv-isa-sim/issues

---

**üìÖ Version:** 1.0  
**üìÖ Last Updated:** 28/10/2025  
**üë§ Author:** GitHub Copilot + minhoang  
**üìÑ License:** MIT  
**üîó Companion Files:**
- `BAO_CAO_HOAN_THANH.md` - Executive summary
- `LINKER_SCRIPT_NOTES.md` - Linker customization guide
- `test_quick.sh` - Automated testing script

---

**üôè C·∫£m ∆°n b·∫°n ƒë√£ ƒë·ªçc h·∫øt file n√†y! Ch√∫c b·∫°n th√†nh c√¥ng v·ªõi RISC-V! üöÄ**
